<!doctype html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device=width, initial-scale=1">
    <title>북북노벨 | 웹소설 본문</title>

    <!-- bootstrap v5.3 -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.7/css/bootstrap.min.css"
        integrity="sha512-fw7f+TcMjTb7bpbLJZlP8g2Y4XcCyFZW8uy8HsRZsH/SwbMw0plKHFHr99DN3l04VsYNwvzicUX/6qurvIxbxw=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />

    <!-- bootstrap icons 1.13.1 -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.13.1/font/bootstrap-icons.min.css">

    <!-- jquery toast plugin v1.3.2 -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jquery-toast-plugin/1.3.2/jquery.toast.min.css"
        integrity="sha512-wJgJNTBBkLit7ymC6vvzM1EcSWeM9mmOu+1USHaRBbHkm6W9EgM0HY27+UtUaprntaYQJF75rc8gjxllKs5OIQ=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <style>
        /* 사용자 정의 스타일 (주석) */
        .main-content {
            padding-bottom: 100px;
        }

        /* 댓글창 스타일 */
        #comment-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            display: none;
            z-index: 1035;
        }

        #comment-section {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            z-index: 1040;
            transform: translateY(100%);
            transition: transform 0.3s ease-in-out;
            border-top-left-radius: 16px;
            border-top-right-radius: 16px;
            box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.1);
        }

        #comment-section.active {
            transform: translateY(0);
        }

        #comment-overlay.active {
            display: block;
        }
    </style>
</head>

<body>
    <div class="container py-4">
        <header class="d-flex justify-content-between align-items-center sticky-top bg-body py-2">
            <div class="d-flex align-items-center gap-3">
                <a href="list.html" class="text-decoration-none">
                    <i class="bi bi-house fs-4 text-body"></i>
                </a>
                <h5 class="m-0 fw-bold">EP.1 첫번째(2)</h5>
            </div>
            <!-- 상단 버튼 -->
            <div class="d-flex gap-3 align-items-center">
                <a href="#" class="btn btn-outline-secondary rounded-circle btn-icon" id="like-btn"
                    data-bs-toggle="tooltip" data-bs-placement="bottom" title="작품추천">
                    <i class="bi bi-heart"></i>
                </a>
                <a href="#" class="btn btn-outline-secondary rounded-circle btn-icon" id="notify-btn"
                    data-bs-toggle="tooltip" data-bs-placement="bottom" title="알림받기">
                    <i class="bi bi-bell"></i>
                </a>
                <div class="dropdown">
                    <a href="#" class="btn btn-outline-secondary rounded-circle btn-icon" id="settings-btn"
                        data-bs-toggle="dropdown" aria-expanded="false">
                        <i class="bi bi-gear"></i>
                    </a>
                    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="settings-btn">
                        <li>
                            <h6 class="dropdown-header">글자 크기</h6>
                        </li>
                        <li><a class="dropdown-item font-size-btn" href="#" data-size="0.7">작게</a></li>
                        <li><a class="dropdown-item font-size-btn" href="#" data-size="1.0">보통</a></li>
                        <li><a class="dropdown-item font-size-btn" href="#" data-size="1.5">크게</a></li>
                        <li>
                            <hr class="dropdown-divider">
                        </li>
                        <li><a class="dropdown-item" href="#" id="dark-mode-toggle">다크모드</a></li>
                    </ul>
                </div>
            </div>
            <!-- //상단 버튼 -->
        </header>

        <!-- 표지 -->
        <div class="row justify-content-center">
            <div class="col-md-3 text-center">
                <div id="cover-image-container">
                    <div id="loading-message" class="text-muted py-5">이미지 불러오는 중...</div>
                    <img src="https://picsum.photos/300/400" alt="전생했더니 액체괴물" class="img-fluid rounded shadow"
                        style="display: none;">
                </div>
            </div>
        </div>
        <!-- //표지 -->

        <!-- 본문 -->
        <div class="main-content d-flex flex-column gap-3 mt-4">
            <p>나는 당황한 나머지 주변을 둘러보았다.</p>
            <p>거대한 버섯들 사이로, 이제껏 본 적 없는 기괴한 생물들이 움직이고 있었다.</p>
            <p>날카로운 이빨을 가진 거대한 쥐, 등껍질에 보석이 박힌 거북이, 그리고 하늘에는 날개 달린 뱀이 날아다녔다.</p>
            <p>여기는 게임 속 세상이 아니었다. 명백한 현실이었다.</p><br>
            <p><b>"그래, 일단 진정하자. 어떻게든 되겠지."</b></p><br>
            <p>나는 심호흡을 하려 했지만, 폐가 없다는 사실만 깨달았다.</p>
            <p>대신 몸 전체가 부풀었다가 가라앉는 것으로 호흡을 대신하는 듯했다.</p>
            <p>나는 이 새로운 몸에 적응해야만 했다.</p>
            <p>가장 먼저 시도한 것은 이동이었다.</p>
            <p>몸을 앞으로 기울이자, 젤리 같은 몸이 천천히 앞으로 쏠렸다.</p>
            <p>생각보다 나쁘지 않은 감각이었다. 마치 물속을 유영하는 기분이랄까.</p>
            <p>나는 조심스럽게 주변을 탐색하기 시작했다.</p>
            <p>그러다 내 눈앞에 작은 샘물이 나타났다.</p>
            <p>샘물에 비친 내 모습은 역시나 투명한 푸른색 슬라임이었다.</p>
            <p>그런데 자세히 보니, 몸의 중심에 작은 핵이 빛나고 있었다.</p>
            <p>마치 내 심장처럼, 핵은 일정하게 고동치고 있었다.</p>
            <br>
            <p><b>"이 핵이 내 생명의 중심인가?"</b></p><br>
            <p>그때, 등 뒤에서 날카로운 소리가 들려왔다.</p>
            <p>돌아본 곳에는 아까 봤던 거대한 쥐가 나를 향해 달려오고 있었다.</p>
            <p>나는 본능적으로 몸을 움츠렸다. 이제 죽었구나, 생각한 순간이었다.</p>
        </div>
        <!-- //본문 -->

        <!-- 하단 버튼 -->
        <footer class="fixed-bottom bg-body-tertiary border-top py-3">
            <div class="d-flex justify-content-around text-center">
                <a href="novel.html" class="footer-item text-decoration-none">
                    <i class="bi bi-arrow-left fs-4"></i>
                    <div class="text-muted fw-bold">이전화</div>
                </a>
                <div class="footer-item" data-bs-toggle="modal" data-bs-target="#episodeListModal" style="cursor: pointer;">
                    <i class="bi bi-list-ul fs-4"></i>
                    <div class="text-muted fw-bold">작품목록</div>
                </div>
                <div class="footer-item" id="recommend-btn" style="cursor: pointer;">
                    <i class="bi bi-hand-thumbs-up fs-4"></i>
                    <div class="text-muted fw-bold">회차추천<span class="ms-1 text-danger"
                            id="recommend-count">(81)</span>
                    </div>
                </div>
                <div class="footer-item" id="comment-btn" style="cursor: pointer;">
                    <i class="bi bi-chat-dots fs-4"></i>
                    <div class="text-muted fw-bold">댓글</div>
                </div>
                <div class="footer-item">
                    <i class="bi bi-arrow-right fs-4 text-muted"></i>
                    <div class="text-muted fw-bold" style="color: #ced4da !important;">다음화</div>
                </div>
            </div>
        </footer>
        <!-- //하단 버튼 -->

        <!-- 회차 목록 모달 -->
        <div class="modal fade" id="episodeListModal" tabindex="-1" aria-labelledby="episodeListModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="episodeListModalLabel">회차 목록</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <!-- 회차 (1~6) -->
                        <div class="p-3 border-bottom d-flex justify-content-between align-items-center episode-item">
                            <div>
                                <span class="fw-bold"><a href="novel.html" class="text-decoration-none text-body">첫번째
                                        (1)</a></span>
                                <span class="badge bg-primary me-2">무료</span><br>
                                <small class="text-muted">EP.1 · 25.07.05</small>
                            </div>
                            <div class="text-end small text-muted">
                                <div><i class="bi bi-eye"></i> 3,155</div>
                                <div><i class="bi bi-hand-thumbs-up"></i> 98</div>
                                <div><i class="bi bi-chat"></i> 105</div>
                            </div>
                        </div>

                        <div class="p-3 border-bottom d-flex justify-content-between align-items-center episode-item">
                            <div>
                                <span class="fw-bold"><a href="novel01.html" class="text-decoration-none text-body">첫번째 (2)</a></span>
                                <span class="badge bg-primary me-2">무료</span><br>
                                <small class="text-muted">EP.2 · 25.07.05</small>
                            </div>
                            <div class="text-end small text-muted">
                                <div><i class="bi bi-eye"></i> 3,911</div>
                                <div><i class="bi bi-hand-thumbs-up"></i> 81</div>
                                <div><i class="bi bi-chat"></i> 85</div>
                            </div>
                        </div>

                        <div class="p-3 border-bottom d-flex justify-content-between align-items-center episode-item">
                            <div>
                                <span class="fw-bold">첫번째 (3)</span>
                                <span class="badge bg-primary me-2">무료</span><br>
                                <small class="text-muted">EP.3 · 25.07.06</small>
                            </div>
                            <div class="text-end small text-muted">
                                <div><i class="bi bi-eye"></i> 4,402</div>
                                <div><i class="bi bi-hand-thumbs-up"></i> 75</div>
                                <div><i class="bi bi-chat"></i> 80</div>
                            </div>
                        </div>

                        <div class="p-3 border-bottom d-flex justify-content-between align-items-center episode-item">
                            <div>
                                <span class="fw-bold">첫번째 (4)</span>
                                <span class="badge bg-primary me-2">무료</span><br>
                                <small class="text-muted">EP.4 · 25.07.07</small>
                            </div>
                            <div class="text-end small text-muted">
                                <div><i class="bi bi-eye"></i> 4,801</div>
                                <div><i class="bi bi-hand-thumbs-up"></i> 112</div>
                                <div><i class="bi bi-chat"></i> 120</div>
                            </div>
                        </div>

                        <div class="p-3 border-bottom d-flex justify-content-between align-items-center episode-item">
                            <div>
                                <span class="fw-bold">첫번째 (5)</span>
                                <span class="badge bg-primary me-2">무료</span><br>
                                <small class="text-muted">EP.5 · 25.07.08</small>
                            </div>
                            <div class="text-end small text-muted">
                                <div><i class="bi bi-eye"></i> 5,122</div>
                                <div><i class="bi bi-hand-thumbs-up"></i> 134</div>
                                <div><i class="bi bi-chat"></i> 140</div>
                            </div>
                        </div>

                        <div class="p-3 border-bottom d-flex justify-content-between align-items-center episode-item">
                            <div>
                                <span class="fw-bold">첫번째 (6)</span>
                                <span class="badge bg-danger me-2">N</span><br>
                                <small class="text-muted">EP.6 · 25.07.09</small>
                            </div>
                            <div class="text-end small text-muted">
                                <div><i class="bi bi-eye"></i> 5,543</div>
                                <div><i class="bi bi-hand-thumbs-up"></i> 147</div>
                                <div><i class="bi bi-chat"></i> 155</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- //회차 목록 모달 -->

        <!-- 댓글창 -->
        <div id="comment-section-container">
            <div id="comment-overlay"></div>
            <div id="comment-section" class="bg-body-tertiary">
                <div class="container py-3">
                    <div class="d-flex justify-content-between align-items-center mb-3">
                        <h5 class="m-0">댓글</h5>
                        <button type="button" class="btn-close" id="close-comment-btn"></button>
                    </div>
                    <div id="comment-list" class="mb-3" style="max-height: 30vh; overflow-y: auto;">
                        <div class="d-flex gap-2 mb-2 border-bottom pb-2">
                            <strong class="text-nowrap">슬라임애호가</strong>
                            <span>주인공 이제 어떻게 되는 건가요? 다음 화 급함!</span>
                        </div>
                        <div class="d-flex gap-2 mb-2 border-bottom pb-2">
                            <strong class="text-nowrap">독자2</strong>
                            <span>쥐한테 잡아먹히는 건 아니겠지ㄷㄷ</span>
                        </div>
                        <div class="d-flex gap-2 mb-2 border-bottom pb-2">
                            <strong class="text-nowrap">PPOO</strong>
                            <span>슬라임이라니 신선하네</span>
                        </div>
                        <div class="d-flex gap-2 mb-2 border-bottom pb-2">
                            <strong class="text-nowrap">익명</strong>
                            <span>작가님 필력 미쳤다</span>
                        </div>
                    </div>
                    <div class="input-group">
                        <input type="text" id="new-comment-input" class="form-control"
                            placeholder="따뜻한 응원의 한마디를 남겨주세요.">
                        <button id="add-comment-btn" class="btn btn-primary">등록</button>
                    </div>
                </div>
            </div>
        </div>
        <!-- //댓글창 -->
    </div>

    <!-- bootstrap v5.3 -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.7/js/bootstrap.bundle.min.js"
        integrity="sha512-Tc0i+vRogmX4NN7tuLbQfBxa8JkfUSAxSFVzmU31nVdHyiHElPPy2cWfFacmCJKw0VqovrzKhdd2TSTMdAxp2g=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>

    <!-- jquery v3.7.1 -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"
        integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>

    <!-- jquery toast plugin v1.3.2 -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-toast-plugin/1.3.2/jquery.toast.min.js"
        integrity="sha512-zlWWyZq71UMApAjih4WkaRpikgY9Bz1oXIW5G0fED4vk14JjGlQ1UmkGM392jEULP8jbNMiwLWdM8Z87Hu88Fw=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>

    <!-- custom -->
    <script>
        $(document).ready(function () {
            // --- 표지 이미지 로딩 처리 ---
            const coverImage = $('#cover-image-container img');
            const loadingMessage = $('#loading-message');

            // 이미지가 캐시된 경우를 대비해, 로드 완료 상태를 먼저 확인
            if (coverImage.prop('complete')) {
                loadingMessage.hide();
                coverImage.show();
            } else {
                coverImage.on('load', function () {
                    loadingMessage.hide();
                    $(this).show();
                });
            }

            // --- 툴팁 초기화 ---
            const tooltipTriggerList = document.querySelectorAll('[data-bs-toggle="tooltip"]');
            const tooltipList = [...tooltipTriggerList].map(tooltipTriggerEl => new bootstrap.Tooltip(tooltipTriggerEl));

            // --- 상단 버튼 로직 ---
            // 좋아요 버튼
            $('#like-btn').on('click', function (e) {
                e.preventDefault();
                const tooltip = bootstrap.Tooltip.getInstance(this);
                if (tooltip) {
                    tooltip.hide();
                }

                const $this = $(this);
                const isActive = $this.hasClass('active');
                const icon = $this.find('i');

                $this.toggleClass('active');

                if (!isActive) {
                    icon.removeClass('bi-heart').addClass('bi-heart-fill');
                    $.toast({
                        text: "작품을 추천했습니다.",
                        position: 'top-center',
                        hideAfter: 2000,
                        stack: false,
                        loader: false
                    });
                } else {
                    icon.removeClass('bi-heart-fill').addClass('bi-heart');
                    $.toast({
                        text: "작품추천을 취소했습니다.",
                        position: 'top-center',
                        hideAfter: 2000,
                        stack: false,
                        loader: false
                    });
                }
            });

            // 알림 버튼
            $('#notify-btn').on('click', function (e) {
                e.preventDefault();
                const tooltip = bootstrap.Tooltip.getInstance(this);
                if (tooltip) {
                    tooltip.hide();
                }

                const $this = $(this);
                const isActive = $this.hasClass('active');
                const icon = $this.find('i');

                $this.toggleClass('active');

                if (!isActive) {
                    icon.removeClass('bi-bell').addClass('bi-bell-fill');
                    $.toast({
                        text: "최신화 업데이트 시 알림을 받습니다.",
                        position: 'bottom-center',
                        hideAfter: 2000,
                        stack: false,
                        loader: false
                    });
                } else {
                    icon.removeClass('bi-bell-fill').addClass('bi-bell');
                    $.toast({
                        text: "알림을 취소했습니다.",
                        position: 'bottom-center',
                        hideAfter: 2000,
                        stack: false,
                        loader: false
                    });
                }
            });

            // --- 설정 드롭다운 로직 ---
            // 글자 크기 조절
            const contentParagraphs = $('.main-content p');
            if (contentParagraphs.length > 0) {
                const originalFontSize = parseFloat(contentParagraphs.css('font-size'));
                $('.font-size-btn').on('click', function (e) {
                    e.preventDefault();
                    const sizeMultiplier = parseFloat($(this).data('size'));
                    contentParagraphs.css('font-size', originalFontSize * sizeMultiplier + 'px');
                });
            }

            // 다크 모드 전환
            $('#dark-mode-toggle').on('click', function (e) {
                e.preventDefault();
                const htmlElement = $('html');
                const currentTheme = htmlElement.attr('data-bs-theme');

                if (currentTheme === 'dark') {
                    htmlElement.attr('data-bs-theme', 'light');
                    $(this).text('다크모드');
                } else {
                    htmlElement.attr('data-bs-theme', 'dark');
                    $(this).text('라이트모드');
                }
            });

            // --- 추천 버튼 로직 ---
            $('#recommend-btn').on('click', function () {
                const $this = $(this);
                const isActive = $this.hasClass('active');
                const icon = $this.find('i');
                const countSpan = $('#recommend-count');
                let currentCount = parseInt(countSpan.text().replace(/[^0-9]/g, ''));

                if (isActive) {
                    $this.removeClass('active');
                    icon.removeClass('bi-hand-thumbs-up-fill').addClass('bi-hand-thumbs-up');
                    currentCount--;
                } else {
                    $this.addClass('active');
                    icon.removeClass('bi-hand-thumbs-up').addClass('bi-hand-thumbs-up-fill');
                    currentCount++;
                }
                countSpan.text('(' + currentCount + ')');
            });

            // --- 댓글 버튼 로직 ---
            $('#comment-btn').on('click', function (event) {
                event.stopPropagation();
                $('#comment-section').addClass('active');
                $('#comment-overlay').addClass('active');
            });

            $('#close-comment-btn, #comment-overlay').on('click', function () {
                $('#comment-section').removeClass('active');
                $('#comment-overlay').removeClass('active');
            });

            // --- 새 댓글 추가 로직 ---
            $('#add-comment-btn').on('click', function () {
                const commentText = $('#new-comment-input').val();
                if (commentText.trim() !== '') {
                    const newComment = $('<div class="d-flex gap-2 mb-2 border-bottom pb-2"><strong class="text-nowrap">You</strong><span></span></div>');
                    newComment.find('span').text(commentText);
                    $('#comment-list').append(newComment);
                    $('#new-comment-input').val('');
                    $('#comment-list').scrollTop($('#comment-list')[0].scrollHeight);
                }
            });

            // Prevent comment section from closing when clicking inside it
            $('#comment-section').on('click', function (event) {
                event.stopPropagation();
            });
        });
    </script>

</body>

</html>